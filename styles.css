:root{
  --bg1:#2D1B69; --bg2:#11998e;
  --text:#fff; --muted:rgba(255,255,255,.8);
  --gold:#FFD700; --orange:#FFA500;
  --ok:#2ecc71; --warn:#e67e22; --err:#e74c3c;
  --glass: rgba(255,255,255,0.12);
  --glass-strong: rgba(255,255,255,0.18);
  --border: rgba(255,255,255,0.28);
  --ring: rgba(255,255,255,.6);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial;
  color:var(--text);
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  -webkit-font-smoothing:antialiased;
}

.container{
  max-width:1100px;
  margin:0 auto;
  padding:16px;
}

.header{
  padding:18px 16px;
  background:var(--glass);
  border: 1px solid var(--border);
  border-radius:20px;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 28px rgba(0,0,0,.28);
  text-align:center;
}
.header h1{ margin:4px 0 8px; font-weight:800; letter-spacing:.3px; }
.header p{ margin:0; color:var(--muted); }

.toolbar{
  margin:16px 0;
  display:flex; gap:12px; align-items:center; justify-content:space-between;
  flex-wrap:wrap;
}

.select-group{
  display:flex; gap:8px; align-items:center;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:14px; padding:8px 12px;
}
select{
  appearance:none; background:transparent; color:var(--text);
  border:none; outline:none; font-weight:600;
}

.stats{
  display:flex; gap:12px; align-items:center;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:14px; padding:8px 12px;
}
.stat{ text-align:center; min-width:90px; }
.stat-number{ font-size:1.4rem; font-weight:800; color:var(--gold); }
.stat-label{ font-size:.8rem; color:var(--muted); }

.games-grid{
  display:grid; gap:16px;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  margin-top:12px;
}
.game-card{
  background:var(--glass-strong);
  border:1px solid var(--border);
  border-radius:20px; padding:20px; text-align:left;
  cursor:pointer; transition: transform .2s ease, box-shadow .2s ease, border-color .2s;
  position:relative; overflow:hidden;
}
.game-card:focus, .game-card:hover{
  transform: translateY(-4px);
  border-color: var(--gold);
  box-shadow: 0 14px 36px rgba(0,0,0,.32);
  outline:none;
}
.game-icon{ font-size:2rem; margin-bottom:8px; }
.game-title{ font-weight:800; color:var(--gold); margin-bottom:6px; }
.game-description{ color:var(--muted); margin:0; }

.btn, .back-btn{
  background: linear-gradient(45deg, var(--gold), var(--orange));
  color:#2D1B69; border:none;
  padding:12px 18px; border-radius:24px; font-weight:800; cursor:pointer;
}
.back-btn{
  background: rgba(255,255,255,.18); color:var(--text);
  border:1px solid var(--border); margin-bottom:12px;
}
.back-btn:hover{ outline:2px solid var(--ring); }

.screen{ display:none; }
.screen.active{ display:block; }

.module-header{
  display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:16px; padding:14px 16px; margin-bottom:12px;
}
.objective{ color:var(--muted); margin:.25rem 0 0; }
.timer{
  min-width:110px; text-align:center; font-weight:900;
  background:rgba(0,0,0,.25); padding:8px 12px; border-radius:10px;
  border:1px solid var(--border);
}
.timer.warning{ color: var(--err); animation: pulse 1s infinite; }
@keyframes pulse{
  0%{ transform:scale(1) } 50%{ transform:scale(1.06) } 100%{ transform:scale(1) }
}

.module-body, .module-footer{
  background:var(--glass-strong);
  border:1px solid var(--border);
  border-radius:16px; padding:16px; margin-bottom:12px;
}

.controls{ display:flex; flex-wrap:wrap; gap:8px; }
.btn-secondary{
  background: rgba(255,255,255,.18); color:var(--text);
  border:1px solid var(--border); border-radius:12px; padding:10px 14px; cursor:pointer;
}
.btn-ghost{ background:transparent; color:var(--text); border:1px dashed var(--border); }

.input, textarea{
  width:100%; padding:12px; border-radius:12px; border:1px solid var(--border);
  background:rgba(0,0,0,.2); color:var(--text);
}
textarea{ min-height:90px; resize:vertical; }

.inline-note{ color:var(--muted); font-size:.9rem; }

.card-grid{
  display:grid; gap:12px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.flip-card{
  perspective: 1000px; height: 160px; position:relative;
}
.flip-card-inner{
  position:absolute; inset:0; transition: transform .6s; transform-style: preserve-3d;
  border:1px solid var(--border); border-radius:14px; background:var(--glass);
  padding:12px;
}
.flip-card.flipped .flip-card-inner{ transform: rotateY(180deg); }
.flip-face{
  position:absolute; inset:0; backface-visibility: hidden; padding:12px;
}
.flip-back{ transform: rotateY(180deg); }

.progress{
  background: rgba(255,255,255,.2); height:8px; border-radius:6px; overflow:hidden; margin:8px 0 12px;
}
.progress > span{
  display:block; height:100%; width:0%;
  background: linear-gradient(45deg, var(--gold), var(--orange));
  transition: width .4s ease;
}

.achievements-tray{
  position:fixed; top:16px; right:16px; z-index:1000; display:flex; flex-direction:column; gap:8px;
}
.achievement{
  background: linear-gradient(45deg, var(--gold), var(--orange));
  color:#2D1B69; font-weight:800;
  padding:8px 12px; border-radius:20px; box-shadow:0 6px 18px rgba(0,0,0,.25);
}

.toast{
  position:fixed; left:50%; bottom:20px; transform: translateX(-50%) translateY(20px);
  background:rgba(0,0,0,.65); color:#fff; padding:10px 14px; border-radius:12px;
  opacity:0; transition: all .25s ease; z-index:1000;
}
.toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }

.export-import{
  margin-top:12px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;
}
.file-label{
  display:inline-flex; align-items:center; gap:8px;
  border:1px dashed var(--border); padding:10px 14px; border-radius:12px; cursor:pointer;
}
.file-label input{ display:none; }

@media (max-width:768px){
  .toolbar{ flex-direction:column; align-items:stretch; }
}

/* Accesibilidad: foco visible y reducci√≥n de movimiento */
:focus-visible{ outline:3px solid var(--gold); outline-offset:2px; border-radius:6px; }
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important; }
}
